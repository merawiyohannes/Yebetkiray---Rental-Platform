<!-- analytics/partials/property_mini_card.html -->
<div class="bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow border border-gray-200 overflow-hidden">
    <!-- Property Image -->
    <div class="relative h-40 overflow-hidden">
        {% if property.get_primary_image %}
        <img src="{{ property.get_primary_image }}" 
             alt="{{ property.title }}"
             class="w-full h-full object-cover hover:scale-105 transition-transform duration-300">
        {% else %}
        <div class="w-full h-full bg-gray-100 flex items-center justify-center">
            <i class="fas fa-home text-gray-300 text-3xl"></i>
        </div>
        {% endif %}
        
        <!-- Status Badge -->
        <div class="absolute top-2 left-2">
            {% if property.is_verified %}
            <span class="px-2 py-1 bg-green-500 text-white text-xs rounded-full shadow">
                <i class="fas fa-check-circle mr-1"></i>Verified
            </span>
            {% elif property.is_rejected %}
            <span class="px-2 py-1 bg-red-500 text-white text-xs rounded-full shadow">
                <i class="fas fa-times-circle mr-1"></i>Rejected
            </span>
            {% else %}
            <span class="px-2 py-1 bg-yellow-500 text-white text-xs rounded-full shadow">
                <i class="fas fa-clock mr-1"></i>Pending
            </span>
            {% endif %}
        </div>
        
        <!-- Price Tag -->
        <div class="absolute bottom-2 left-2 bg-primary/90 text-white px-3 py-1 rounded-lg font-bold text-sm">
            {{ property.price }} ETB
        </div>
    </div>
    
    <!-- Property Details -->
    <div class="p-4">
        <!-- Title & Location -->
        <h3 class="font-bold text-gray-900 text-sm mb-1 truncate" title="{{ property.title }}">
            {{ property.title }}
        </h3>
        
        <div class="flex items-center text-gray-600 text-xs mb-3">
            <i class="fas fa-map-marker-alt text-primary mr-1"></i>
            <span class="truncate">{{ property.get_location_display }}</span>
        </div>
        
        <!-- Property Features -->
        <div class="flex justify-between text-xs text-gray-600 mb-4">
            <span class="flex items-center">
                <i class="fas fa-bed text-primary mr-1"></i>
                {{ property.bedrooms }}
            </span>
            <span class="flex items-center">
                <i class="fas fa-bath text-primary mr-1"></i>
                {{ property.bathrooms }}
            </span>
            <span class="flex items-center">
                <i class="fas fa-ruler-combined text-primary mr-1"></i>
                {{ property.area }}mÂ²
            </span>
        </div>
        
        <!-- Action Buttons (Compact) -->
        <div class="flex space-x-2">
            {% if property.is_verified %}
            <a href="{% url 'detail_view' property.id %}" 
               class="flex-1 text-center px-3 py-2 bg-primary text-white rounded text-xs hover:bg-green-800 transition-colors">
                <i class="fas fa-eye mr-1"></i> View
            </a>
            <a href="{% url 'property_edit_view' property.id %}" 
               class="px-3 py-2 bg-blue-100 text-blue-700 rounded text-xs hover:bg-blue-200 transition-colors">
                <i class="fas fa-edit"></i>
            </a>
            <a href="{% url 'delete_view' property.id %}" 
               class="px-3 py-2 bg-red-100 text-red-700 rounded text-xs hover:bg-red-200 transition-colors">
                <i class="fas fa-trash"></i>
            </a>

            <!-- In landlord dashboard property cards -->
            {% if not property.is_featured %}
            <a href="{% url 'upgrade_featured' property.id %}" 
            class="px-3 py-2 bg-yellow-500 text-white rounded text-xs hover:bg-yellow-600 transition-colors">
            <i class="fas fa-star mr-2"></i> Feature It
            </a>
            {% else %}
            <span class="px-3 py-2 bg-green-100 text-green-800 rounded text-xs">
            <i class="fas fa-star mr-1"></i> Featured until {{ property.featured_until|date:"M d" }}
            </span>
            {% endif %}
            
            {% elif property.is_rejected %}
            <a href="{% url 'property_edit_view' property.id %}" 
               class="flex-1 text-center px-3 py-2 bg-yellow-500 text-white rounded text-xs hover:bg-yellow-600 transition-colors">
                <i class="fas fa-redo mr-1"></i> Resubmit
            </a>
            <a href="{% url 'delete_property_image' property.id %}" 
               class="px-3 py-2 bg-red-100 text-red-700 rounded text-xs hover:bg-red-200 transition-colors">
                <i class="fas fa-trash"></i>
            </a>
            
            {% else %}
            <span class="flex-1 text-center px-3 py-2 bg-gray-100 text-gray-400 rounded text-xs cursor-not-allowed">
                <i class="fas fa-clock mr-1"></i> Awaiting
            </span>
            <span class="px-3 py-2 bg-gray-100 text-gray-400 rounded text-xs cursor-not-allowed">
                <i class="fas fa-edit"></i>
            </span>
            <span class="px-3 py-2 bg-gray-100 text-gray-400 rounded text-xs cursor-not-allowed">
                <i class="fas fa-trash"></i>
            </span>
            {% endif %}
        </div>
        
        <!-- Additional Info -->
        {% if property.is_rejected and property.rejection_reason %}
        <div class="mt-3 p-2 bg-red-50 rounded text-xs text-red-700">
            <i class="fas fa-info-circle mr-1"></i>
            <span class="truncate">{{ property.rejection_reason|truncatechars:60 }}</span>
        </div>
        {% elif not property.is_verified and not property.is_rejected %}
        <div class="mt-3 p-2 bg-yellow-50 rounded text-xs text-yellow-700">
            <i class="fas fa-clock mr-1"></i>
            Under review. Usually takes 24 hours.
        </div>
        {% endif %}
    </div>
</div>